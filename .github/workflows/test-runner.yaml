name: Test Self-Hosted Runner
 
on:
  workflow_dispatch:
 
jobs:
  test:
    name: Test Runner & Cluster Access
    runs-on: self-hosted
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Check runner environment
        run: |
          echo "ğŸ–¥ï¸ InformaciÃ³n del runner:"
          echo "Hostname: $(hostname)"
          echo "OS: $(uname -s)"
          echo "Directorio de trabajo: $(pwd)"
      
      - name: Verify /mnt/c/Program\ Files/Docker/Docker/resources/bin/kubectl.exe access
        run: |
          echo "ğŸ” Verificando acceso a Kubernetes..."
          /mnt/c/Program\ Files/Docker/Docker/resources/bin/kubectl.exe version --client
          /mnt/c/Program\ Files/Docker/Docker/resources/bin/kubectl.exe config current-context
      
      - name: List Kubernetes namespaces
        run: |
          echo "ğŸ“¦ Namespaces de Kubernetes:"
          /mnt/c/Program\ Files/Docker/Docker/resources/bin/kubectl.exe get namespaces
      
      - name: Check our environments
        run: |
          echo "âœ… Comprobando los entornos del laboratorio:"
          /mnt/c/Program\ Files/Docker/Docker/resources/bin/kubectl.exe get namespace dev staging prod
      
      - name: Success!
        run: |
          echo "ğŸ‰ Â¡El runner funciona y tiene acceso al clÃºster!"
